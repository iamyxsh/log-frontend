(this["webpackJsonplog-frontend"]=this["webpackJsonplog-frontend"]||[]).push([[0],{156:function(e,t,n){},169:function(e,t,n){"use strict";n.r(t);var a,c,r,i,s,o,l=n(20),j=n.n(l),u=(n(156),n(30)),b=n(134),d=n(82),m=n(19),O=n(11),h=n(0),x=n(217),g=n(219),p=n(223),f=n(222),v=n(218),y=n(220),S=n(221),k=n(170),w=n(212),I=n(229),C=n(216),A=n(43),$=n(26),N=Object($.a)(a||(a=Object(A.a)(["\n\tquery getLogs($limit: Int!, $skip: Int!, $term: String) {\n\t\tgetLogs(limit: $limit, skip: $skip, term: $term) {\n\t\t\tid\n\t\t\tnumber\n\t\t\tcomment\n\t\t}\n\t}\n"]))),L=Object($.a)(c||(c=Object(A.a)(["\n\tmutation createLog($number: String!, $log: String!) {\n\t\tcreateLog(createLogInput: { number: $number, comment: $log }) {\n\t\t\tid\n\t\t\tnumber\n\t\t\tcomment\n\t\t}\n\t}\n"]))),F=n(233),E=n(215),P=n(211),W=n(210),U=n(214),B=n(232),J=Object($.a)(r||(r=Object(A.a)(["\n\tquery getUsers($limit: Int!, $skip: Int!, $term: String) {\n\t\tgetUsers(limit: $limit, skip: $skip, term: $term) {\n\t\t\tid\n\t\t\temail\n\t\t\tname\n\t\t\tpassword\n\t\t\tcreatedAt\n\t\t\tisAdmin\n\t\t}\n\t}\n"]))),M=Object($.a)(i||(i=Object(A.a)(["\n\tmutation updateAdminInfo($isAdmin: Boolean!, $userId: String!) {\n\t\tupdateAdminInfo(\n\t\t\tupdateAdminInfoInput: { isAdmin: $isAdmin, userId: $userId }\n\t\t) {\n\t\t\tisAdmin\n\t\t}\n\t}\n"]))),Q=(Object($.a)(s||(s=Object(A.a)(["\n\tmutation updateAdminInfo($isAdmin: Boolean!, $userId: String!) {\n\t\tupdateAdminInfo(\n\t\t\tupdateAdminInfoInput: { isAdmin: $isAdmin, userId: $userId }\n\t\t) {\n\t\t\tisAdmin\n\t\t}\n\t}\n"]))),Object($.a)(o||(o=Object(A.a)(["\n\tmutation createUser(\n\t\t$isAdmin: Boolean!\n\t\t$email: String!\n\t\t$password: String!\n\t\t$name: String!\n\t) {\n\t\tcreateUser(\n\t\t\tcreateUserInput: {\n\t\t\t\tisAdmin: $isAdmin\n\t\t\t\temail: $email\n\t\t\t\tpassword: $password\n\t\t\t\tname: $name\n\t\t\t}\n\t\t) {\n\t\t\tisAdmin\n\t\t}\n\t}\n"])))),T=n(231),q=n(4);function D(e){var t=e.open,n=e.setOpen,a=e.type,c=e.reload,r=e.setReload,i=Object(h.useState)(""),s=Object(O.a)(i,2),o=s[0],l=s[1],j=Object(h.useState)(""),b=Object(O.a)(j,2),d=b[0],m=b[1],x=Object(h.useState)(""),g=Object(O.a)(x,2),p=g[0],f=g[1],v=Object(h.useState)(""),y=Object(O.a)(v,2),S=y[0],k=y[1],A=Object(h.useState)(""),$=Object(O.a)(A,2),N=$[0],J=$[1],M=Object(h.useState)(!1),D=Object(O.a)(M,2),R=D[0],z=D[1],G=Object(h.useState)(""),H=Object(O.a)(G,2),V=H[0],K=H[1],X=function(){n(!1)},Y=Object(u.useMutation)(L,{onCompleted:function(){n(!1),r(!c)},onError:function(e){K(e.graphQLErrors[0].extensions.exception.stacktrace[0].split(":")[2]),setTimeout((function(){K("")}),[3e3])},variables:{number:o.toString(),log:d}}),Z=Object(O.a)(Y,1)[0],_=Object(u.useMutation)(Q,{update:function(e,t){n(!1),r(!c)},onError:function(e){K(e.graphQLErrors[0].extensions.exception.stacktrace[0].split(":")[2]),console.log(e),setTimeout((function(){K("")}),[3e3])},variables:{email:p,name:N,password:S,isAdmin:R}}),ee=Object(O.a)(_,1)[0];return Object(q.jsxs)(F.a,{open:t,onClose:X,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(q.jsx)(W.a,{style:{color:"blue"},children:"ADD"}),"user"===a?Object(q.jsx)(P.a,{children:Object(q.jsxs)(w.a,{container:!0,spacing:2,children:[Object(q.jsx)(w.a,{item:!0,xs:12,style:{display:V?void 0:"none"},children:Object(q.jsx)(T.a,{severity:"error",children:V})}),Object(q.jsx)(w.a,{item:!0,xs:12,children:Object(q.jsx)(I.a,{value:N,onChange:function(e){return J(e.target.value)},label:"Name",fullWidth:!0,type:"text",error:N.length<5||N.length>20})}),Object(q.jsx)(w.a,{item:!0,xs:12,children:Object(q.jsx)(I.a,{value:p,onChange:function(e){return f(e.target.value)},label:"Email",fullWidth:!0,type:"email",error:p.length<5||p.length>20})}),Object(q.jsx)(w.a,{item:!0,xs:12,children:Object(q.jsx)(I.a,{value:S,onChange:function(e){return k(e.target.value)},label:"Password",type:"text",fullWidth:!0,error:S.length<5||S.length>20})}),Object(q.jsx)(w.a,{item:!0,children:Object(q.jsx)(U.a,{control:Object(q.jsx)(B.a,{checked:R,onClick:function(){return z((function(e){return!e}))}}),label:"Admin"})})]})}):Object(q.jsx)(P.a,{children:Object(q.jsxs)(w.a,{container:!0,spacing:2,children:[Object(q.jsx)(w.a,{item:!0,xs:12,style:{display:V?void 0:"none"},children:Object(q.jsx)(T.a,{severity:"error",children:V})}),Object(q.jsx)(w.a,{item:!0,xs:12,children:Object(q.jsx)(I.a,{value:o,onChange:function(e){return l(e.target.value)},label:"Number",fullWidth:!0,type:"number"})}),Object(q.jsx)(w.a,{item:!0,xs:12,children:Object(q.jsx)(I.a,{value:d,onChange:function(e){return m(e.target.value)},label:"Log",rows:4,multiline:!0,fullWidth:!0})}),Object(q.jsxs)(w.a,{item:!0,style:{color:"grey"},children:[d.length,"/160"]})]})}),Object(q.jsxs)(E.a,{children:[Object(q.jsx)(C.a,{onClick:X,color:"primary",children:"Cancel"}),Object(q.jsx)(C.a,{onClick:function(){"user"!==a&&Z(),"user"===a&&ee()},color:"primary",autoFocus:!0,children:"Add"})]})]})}var R=Object(x.a)({table:{maxWidth:"98vw"}});function z(){var e=R(),t=Object(h.useState)(0),n=Object(O.a)(t,2),a=n[0],c=n[1],r=Object(h.useState)(),i=Object(O.a)(r,2),s=i[0],o=i[1],l=Object(h.useState)(""),j=Object(O.a)(l,2),b=j[0],d=j[1],m=Object(h.useState)(!1),x=Object(O.a)(m,2),A=x[0],$=x[1],L=Object(h.useState)(!1),F=Object(O.a)(L,2),E=F[0],P=F[1],W=Object(u.useLazyQuery)(N,{onError:function(e){console.log(e)},onCompleted:function(e){o(e)},fetchPolicy:"network-only",variables:{limit:10,skip:a,term:b}}),U=Object(O.a)(W,1)[0];return Object(h.useEffect)((function(){U()}),[E]),console.log(s),Object(q.jsxs)(q.Fragment,{children:[s&&s.getLogs.length>0&&Object(q.jsx)(q.Fragment,{children:Object(q.jsxs)(w.a,{container:!0,justify:"center",alignItems:"center",style:{padding:"2rem"},spacing:2,children:[Object(q.jsx)(w.a,{item:!0,xs:4,children:Object(q.jsx)(I.a,{value:b,onChange:function(e){return d(e.target.value)},label:"Search by Number",type:"number",autoFocus:!0})}),Object(q.jsx)(w.a,{item:!0,xs:12,children:Object(q.jsx)(v.a,{component:k.a,children:Object(q.jsxs)(g.a,{className:e.table,"aria-label":"simple table",children:[Object(q.jsx)(y.a,{children:Object(q.jsxs)(S.a,{children:[Object(q.jsx)(f.a,{align:"center",children:"Number"}),Object(q.jsx)(f.a,{align:"center",children:"Logs"})]})}),Object(q.jsx)(p.a,{children:s.getLogs.map((function(e,t){return Object(q.jsxs)(S.a,{children:[Object(q.jsx)(f.a,{align:"center",children:e.number}),Object(q.jsx)(f.a,{align:"center",children:e.comment})]},t)}))})]})})}),Object(q.jsxs)(w.a,{item:!0,container:!0,justify:"center",alignItems:"center",children:[Object(q.jsx)(w.a,{item:!0,xs:2,children:Object(q.jsx)(C.a,{onClick:function(){return c(0)},variant:"contained",style:{backgroundColor:"#FFFF00"},children:"First"})}),Object(q.jsx)(w.a,{item:!0,xs:2,children:Object(q.jsx)(C.a,{onClick:function(){return c((function(e){return e-1}))},variant:"contained",color:"primary",disabled:0===a,children:"Previous"})}),Object(q.jsx)(w.a,{item:!0,xs:2,children:Object(q.jsx)(C.a,{disabled:s.getLogs.length<10,variant:"contained",color:"secondary",children:"Next"})}),Object(q.jsx)(w.a,{item:!0,children:Object(q.jsx)(C.a,{onClick:function(){return $(!0)},variant:"contained",color:"primary",children:"Add"})})]})]})}),Object(q.jsx)(D,{reload:E,setReload:function(e){return P(e)},open:A,setOpen:function(e){return $(e)}})]})}var G,H=n(67),V=n.n(H),K=n(94),X=n(234),Y=n(226),Z=n(132),_=n.n(Z),ee=n(136),te=n(225),ne=n(224),ae=Object($.a)(G||(G=Object(A.a)(["\n\tmutation signin($email: String!, $password: String!) {\n\t\tloginUser(loginUserInput: { email: $email, password: $password }) {\n\t\t\tuser {\n\t\t\t\tname\n\t\t\t\temail\n\t\t\t\tisAdmin\n\t\t\t}\n\t\t\ttoken\n\t\t}\n\t}\n"]))),ce=Object(x.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function re(){var e=ce(),t=Object(m.g)(),n=Object(h.useState)(""),a=Object(O.a)(n,2),c=a[0],r=a[1],i=Object(h.useState)(""),s=Object(O.a)(i,2),o=s[0],l=s[1],j=Object(h.useState)(""),b=Object(O.a)(j,2),d=b[0],x=b[1],g=Object(u.useMutation)(ae,{update:function(e,n){localStorage.setItem("user",JSON.stringify(n.data.loginUser.user)),localStorage.setItem("token",n.data.loginUser.token),t.push("/home"),window.location.reload()},onError:function(e){x(e.graphQLErrors[0].extensions.exception.stacktrace[0].split(":")[2]),setTimeout((function(){x("")}),[3e3])},variables:{email:c,password:o}}),p=Object(O.a)(g,2),f=p[0],v=p[1].loading,y=function(){var e=Object(K.a)(V.a.mark((function e(t){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),f();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return v?Object(q.jsx)("div",{style:{display:"flex",justifyItems:"center",alignItems:"center",width:"100vw",height:"100vh"},children:Object(q.jsx)(ne.a,{})}):Object(q.jsxs)(te.a,{component:"main",maxWidth:"xs",children:[Object(q.jsx)(Y.a,{}),Object(q.jsxs)("div",{className:e.paper,children:[Object(q.jsx)(X.a,{className:e.avatar,children:Object(q.jsx)(_.a,{})}),Object(q.jsx)(ee.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(q.jsx)(T.a,{severity:"error",style:{display:d?void 0:"none",width:"100%",margin:"1rem 0"},children:d}),Object(q.jsxs)("form",{className:e.form,noValidate:!0,children:[Object(q.jsx)(I.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",value:c,onChange:function(e){return r(e.target.value)},autoComplete:"email",autoFocus:!0}),Object(q.jsx)(I.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",value:o,onChange:function(e){return l(e.target.value)},autoComplete:"current-password"}),Object(q.jsx)(C.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:function(e){return y(e)},children:"Sign In"})]})]})]})}var ie=Object(x.a)({table:{maxWidth:"98vw"},num:{width:"30vw"},comm:{width:"70vw"}});function se(){var e=ie(),t=Object(h.useState)(0),n=Object(O.a)(t,2),a=n[0],c=n[1],r=Object(h.useState)(""),i=Object(O.a)(r,2),s=i[0],o=i[1],l=Object(h.useState)(""),j=Object(O.a)(l,2),b=j[0],d=j[1],m=Object(h.useState)(""),x=Object(O.a)(m,2),A=x[0],$=x[1],N=Object(h.useState)(null),L=Object(O.a)(N,2),F=L[0],E=(L[1],Object(h.useState)("")),P=Object(O.a)(E,2),W=P[0],Q=P[1],T=Object(h.useState)(!1),R=Object(O.a)(T,2),z=R[0],G=R[1],H=Object(h.useState)([]),X=Object(O.a)(H,2),Y=X[0],Z=X[1],_=Object(h.useState)(!1),ee=Object(O.a)(_,2),te=ee[0],ne=ee[1],ae=Object(u.useLazyQuery)(J,{variables:{limit:10,skip:a,term:W},onCompleted:function(e){console.log(e),Z(e.getUsers)},fetchPolicy:"network-only"}),ce=Object(O.a)(ae,1)[0];Object(h.useEffect)((function(){ce()}),[z,ce]);var re=Object(u.useMutation)(M,{onCompleted:function(){G((function(e){return!e}))}}),se=Object(O.a)(re,1)[0],oe=function(){var e=Object(K.a)(V.a.mark((function e(t,n){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:se({variables:{isAdmin:n,userId:t}});case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(q.jsxs)(q.Fragment,{children:[Y.length>0&&Object(q.jsx)(q.Fragment,{children:Object(q.jsxs)(w.a,{container:!0,justify:"center",alignItems:"center",style:{padding:"2rem"},spacing:2,children:[Object(q.jsx)(w.a,{item:!0,xs:4,children:Object(q.jsx)(I.a,{value:W,onChange:function(e){return Q(e.target.value)},label:"Search by email",type:"text"})}),Object(q.jsx)(w.a,{item:!0,xs:12,children:Object(q.jsx)(v.a,{component:k.a,children:Object(q.jsxs)(g.a,{className:e.table,"aria-label":"simple table",children:[Object(q.jsx)(y.a,{children:Object(q.jsxs)(S.a,{children:[Object(q.jsx)(f.a,{align:"center",children:"Name"}),Object(q.jsx)(f.a,{align:"center",children:"Email"}),Object(q.jsx)(f.a,{align:"center",children:"Password"}),Object(q.jsx)(f.a,{align:"center",children:"Admin"})]})}),Object(q.jsx)(p.a,{children:Y.map((function(e,t){return Object(q.jsxs)(S.a,{children:[Object(q.jsx)(f.a,{align:"center",children:F!==t?e.name:Object(q.jsx)(I.a,{label:"Password",value:s,onChange:function(e){return $(e.target.value)}})}),Object(q.jsx)(f.a,{align:"center",children:F!==t?e.password:Object(q.jsx)(I.a,{label:"Name",value:A,onChange:function(e){return o(e.target.value)}})}),Object(q.jsx)(f.a,{align:"center",children:F!==t?e.email:Object(q.jsx)(I.a,{label:"Email",value:b,onChange:function(e){return d(e.target.value)}})}),Object(q.jsx)(f.a,{align:"center",children:Object(q.jsx)(U.a,{control:Object(q.jsx)(B.a,{checked:e.isAdmin,onChange:function(){return oe(e.id,!e.isAdmin)}})})})]},t)}))})]})})}),Object(q.jsxs)(w.a,{item:!0,container:!0,justify:"center",alignItems:"center",children:[Object(q.jsx)(w.a,{item:!0,xs:2,children:Object(q.jsx)(C.a,{variant:"contained",style:{backgroundColor:"#FFFF00"},onClick:function(){return c(0)},children:"First"})}),Object(q.jsx)(w.a,{item:!0,xs:2,children:Object(q.jsx)(C.a,{onClick:function(){return c((function(e){return e-1}))},variant:"contained",color:"primary",disabled:0===a,children:"Previous"})}),Object(q.jsx)(w.a,{item:!0,xs:2,children:Object(q.jsx)(C.a,{disabled:Y.length<10,variant:"contained",color:"secondary",onClick:function(){return c((function(e){return e+1}))},children:"Next"})}),Object(q.jsx)(w.a,{item:!0,children:Object(q.jsx)(C.a,{onClick:function(){return ne(!0)},variant:"contained",color:"primary",children:"Add"})})]})]})}),Object(q.jsx)(D,{reload:z,setReload:function(e){return G(e)},open:te,setOpen:function(e){return ne(e)},type:"user"})]})}var oe=n(54),le=n(95),je=function(e){var t=e.component,n=Object(le.a)(e,["component"]),a=localStorage.getItem("token");return Object(q.jsx)(m.b,Object(oe.a)(Object(oe.a)({},n),{},{render:function(e){return a?Object(q.jsx)(t,Object(oe.a)({},e)):Object(q.jsx)(m.a,{to:"/"})}}))},ue=function(e){var t=e.component,n=Object(le.a)(e,["component"]),a=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):{};return Object(q.jsx)(m.b,Object(oe.a)(Object(oe.a)({},n),{},{render:function(e){return a.isAdmin?Object(q.jsx)(t,Object(oe.a)({},e)):Object(q.jsx)(m.a,{to:"/"})}}))},be=n(227),de=n(228),me=n(213),Oe=n(133),he=n.n(Oe),xe=Object(x.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));function ge(){var e=xe(),t=Object(m.g)(),n=localStorage.getItem("token"),a=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):{};return Object(q.jsx)("div",{className:e.root,children:Object(q.jsx)(be.a,{position:"static",children:Object(q.jsxs)(de.a,{children:[Object(q.jsx)(me.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu",children:Object(q.jsx)(he.a,{})}),Object(q.jsx)(ee.a,{variant:"h6",className:e.title,children:"Logs"}),Object(q.jsx)(C.a,{style:{display:n?"inline-block":"none"},color:"inherit",onClick:function(){return t.push("/home")},children:"Logs Page"}),Object(q.jsx)(C.a,{style:{display:a.isAdmin?"inline-block":"none"},color:"inherit",onClick:function(){return t.push("/admin/users")},children:"Admin Panel"}),Object(q.jsx)(C.a,{style:{display:n?void 0:"none"},color:"inherit",onClick:function(){localStorage.removeItem("token"),localStorage.removeItem("user"),t.push("/"),window.location.reload()},children:"Logout"})]})})})}var pe=function(){return Object(q.jsxs)(d.a,{children:[Object(q.jsx)(ge,{}),Object(q.jsxs)(m.d,{children:[Object(q.jsx)(m.b,{path:"/",exact:!0,component:re}),Object(q.jsx)(je,{path:"/home",exact:!0,component:z}),Object(q.jsx)(ue,{path:"/admin/users",exact:!0,component:se})]})]})},fe=Object(u.createHttpLink)({uri:"http://localhost:5000/"}),ve=Object(b.a)((function(){var e=localStorage.getItem("token");return{headers:{Authorization:e?"Bearer ".concat(e):""}}})),ye=new u.ApolloClient({link:ve.concat(fe),cache:new u.InMemoryCache}),Se=function(){return Object(q.jsx)(pe,{})},ke=Object(q.jsx)(u.ApolloProvider,{client:ye,children:Object(q.jsx)(Se,{})});j.a.render(ke,document.getElementById("root"))}},[[169,1,2]]]);
//# sourceMappingURL=main.ebf901c6.chunk.js.map